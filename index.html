<!DOCTYPE html>
<html lang="ar" dir="rtl" id="main-html">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sarmad Protocol | Ø§ØªÙØ§Ù‚ÙŠØ© Ø§Ù„Ù…Ø³ØªØ«Ù…Ø±</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&family=Orbitron:wght@700&display=swap" rel="stylesheet">
<style>
:root {
    --gold: #d4af37;
    --bg: #0a0a0a;
    --card: #111;
    --text: #fff;
    --grey: #888;
    --green: #00ff88;
    --red: #ff4444;
    --orange: #ffa500;
    --border: #222;
    --glass: rgba(255, 255, 255, 0.05);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Tajawal', sans-serif;
    line-height: 1.8;
    overflow-x: hidden;
}

/* Agreement Page Styles */
.agreement-page {
    min-height: 100vh;
    padding: 20px;
}

.agreement-container {
    max-width: 800px;
    margin: 0 auto;
}

.agreement-header {
    text-align: center;
    padding: 40px 20px;
    border-bottom: 1px solid var(--border);
    margin-bottom: 30px;
}

.agreement-logo {
    font-family: 'Orbitron', sans-serif;
    font-size: 2rem;
    color: var(--gold);
    margin-bottom: 10px;
    letter-spacing: 3px;
}

.agreement-subtitle {
    color: var(--grey);
    font-size: 1rem;
}

.lang-switch {
    position: fixed;
    top: 20px;
    left: 20px;
    background: transparent;
    border: 1px solid var(--gold);
    color: var(--gold);
    padding: 8px 16px;
    border-radius: 20px;
    cursor: pointer;
    font-family: inherit;
    font-size: 0.85rem;
    z-index: 100;
    transition: all 0.3s;
}

.lang-switch:hover {
    background: rgba(212, 175, 55, 0.1);
}

.content-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 30px;
    margin-bottom: 20px;
}

.section-title {
    color: var(--gold);
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--border);
}

.terms-list {
    list-style: none;
}

.terms-list li {
    padding: 15px 0;
    border-bottom: 1px solid var(--border);
    color: #ccc;
    font-size: 0.95rem;
    position: relative;
    padding-right: 30px;
}

.terms-list li:last-child {
    border-bottom: none;
}

.terms-list li:before {
    content: "â€¢";
    color: var(--gold);
    position: absolute;
    right: 0;
    font-size: 1.5rem;
    line-height: 1.2;
}

.terms-list li strong {
    color: var(--text);
    display: block;
    margin-bottom: 5px;
}

.highlight-box {
    background: rgba(255, 68, 68, 0.05);
    border: 1px solid rgba(255, 68, 68, 0.2);
    border-radius: 12px;
    padding: 20px;
    margin: 20px 0;
}

.highlight-title {
    color: var(--red);
    font-weight: 700;
    margin-bottom: 10px;
    font-size: 0.95rem;
}

.agree-section {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 25px;
    margin-bottom: 20px;
}

.checkbox-container {
    display: flex;
    align-items: flex-start;
    gap: 15px;
    cursor: pointer;
}

.checkbox-container input[type="checkbox"] {
    width: 24px;
    height: 24px;
    accent-color: var(--gold);
    margin-top: 3px;
    cursor: pointer;
    flex-shrink: 0;
}

.checkbox-text {
    color: #ccc;
    font-size: 0.95rem;
    line-height: 1.6;
}

.checkbox-text strong {
    color: var(--text);
}

.agreement-btn {
    width: 100%;
    padding: 18px;
    background: linear-gradient(135deg, var(--gold) 0%, #b8941f 100%);
    color: #000;
    border: none;
    border-radius: 12px;
    font-size: 1.1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s;
    font-family: inherit;
}

.agreement-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(212, 175, 55, 0.3);
}

.agreement-btn:disabled {
    background: #333;
    color: #666;
    cursor: not-allowed;
}

.footer-note {
    text-align: center;
    color: var(--grey);
    font-size: 0.8rem;
    margin-top: 20px;
}

/* Wallet App Styles (Original) */
.wallet-app {
    display: none;
}

header {
    background: #000;
    padding: 20px 15px 10px 15px;
    border-bottom: 2px solid var(--gold);
}

.logo-container {
    text-align: center;
    margin-bottom: 15px;
}

.logo {
    font-family: 'Orbitron', sans-serif;
    color: var(--text);
    font-size: 1.5rem;
    letter-spacing: 2px;
}

.sub-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 500px;
    margin: 10px auto;
}

.user-id {
    font-size: 0.75rem;
    color: var(--text);
    border: 1px solid #333;
    padding: 5px 12px;
    border-radius: 20px;
}

.clickable {
    color: var(--gold);
    border: 1px solid var(--gold);
    background: none;
    padding: 8px 15px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    transition: 0.2s;
    text-decoration: none;
    font-size: 0.9rem;
}

.clickable:hover {
    background: rgba(212, 175, 55, 0.1);
}

.clickable:disabled {
    color: var(--grey);
    border-color: var(--grey);
    cursor: not-allowed;
    opacity: 0.6;
}

.clickable:active {
    transform: scale(0.95);
}

.container {
    max-width: 500px;
    margin: auto;
    padding: 20px;
}

.card {
    background: #0a0a0a;
    border: 1px solid #222;
    padding: 20px;
    border-radius: 15px;
    margin-bottom: 20px;
    text-align: center;
}

.stats-box {
    display: flex;
    justify-content: space-around;
    padding: 15px 0;
    margin-bottom: 10px;
    border-bottom: 1px solid #222;
}

.stat-item {
    flex: 1;
}

.stat-label {
    display: block;
    font-size: 0.65rem;
    color: var(--grey);
    margin-bottom: 5px;
    text-transform: uppercase;
}

.stat-val {
    font-size: 1.2rem;
    font-weight: bold;
    color: var(--gold);
    font-family: 'Orbitron', sans-serif;
}

.balance-val {
    font-size: 2.5rem;
    font-weight: bold;
    color: var(--text);
    display: block;
    margin: 10px 0;
    font-family: 'Orbitron', sans-serif;
}

.price-text {
    direction: ltr !important;
    unicode-bidi: bidi-override;
    display: inline-block;
    font-size: 0.85rem;
    cursor: pointer;
}

.usd-val {
    font-size: 0.9rem;
    color: var(--text);
    margin-top: 8px;
    opacity: 0.8;
}

input, textarea {
    width: 100%;
    padding: 15px;
    margin: 10px 0;
    background: #000;
    border: 1px solid #333;
    color: var(--text);
    border-radius: 10px;
    box-sizing: border-box;
    text-align: center;
    font-family: inherit;
    font-size: 0.9rem;
}

textarea {
    resize: none;
    font-family: monospace;
}

.main-btn {
    width: 100%;
    margin-top: 10px;
}

.wallet-box {
    background: #111;
    color: var(--gold);
    padding: 15px;
    border-radius: 8px;
    font-family: monospace;
    cursor: pointer;
    border: 1px dashed var(--gold);
    display: block;
    margin: 15px 0;
    word-break: break-all;
    font-size: 0.85rem;
    transition: 0.2s;
}

.wallet-box:hover {
    background: #1a1a1a;
}

table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.8rem;
    margin-top: 15px;
}

td {
    padding: 12px;
    border-bottom: 1px solid #222;
    text-align: center;
}

.st-pending {
    color: var(--orange);
    font-weight: bold;
}

.st-approved {
    color: var(--green);
    font-weight: bold;
}

.st-rejected {
    color: var(--red);
    font-weight: bold;
}

.reason-text {
    font-size: 0.7rem;
    color: #ff8888;
    display: block;
    margin-top: 5px;
}

.txid-preview {
    font-family: monospace;
    font-size: 0.75rem;
    color: var(--grey);
}

.char-counter {
    font-size: 0.75rem;
    color: var(--grey);
    text-align: right;
    margin-top: -5px;
    margin-bottom: 10px;
}

.char-counter.valid {
    color: var(--green);
}

.char-counter.invalid {
    color: var(--red);
}

.empty-state {
    color: var(--grey);
    padding: 30px;
    text-align: center;
    font-size: 0.9rem;
}

.hidden {
    display: none !important;
}

.ar-mode {
    font-family: 'Tajawal', sans-serif;
}

[dir="ltr"] .terms-list li {
    padding-right: 0;
    padding-left: 30px;
}

[dir="ltr"] .terms-list li:before {
    right: auto;
    left: 0;
}

@media (max-width: 600px) {
    .content-card, .agree-section {
        padding: 20px;
    }
    .agreement-logo {
        font-size: 1.5rem;
    }
    .lang-switch {
        top: 10px;
        left: 10px;
        padding: 6px 12px;
        font-size: 0.8rem;
    }
}
</style>
</head>
<body id="body-tag">

<div id="agreementPage" class="agreement-page">
    <button class="lang-switch" onclick="toggleAgreementLang()">English</button>
    
    <div class="agreement-container">
        <div class="agreement-header">
            <div class="agreement-logo">SARMAD PROTOCOL</div>
            <div class="agreement-subtitle" id="agreeSubtitle">Ø§ØªÙØ§Ù‚ÙŠØ© Ø´Ø±Ø§Ø¡ Ø¹Ù…Ù„Ø§Øª SRMD Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©</div>
        </div>

        <div class="content-card">
            <div class="section-title" id="termsTitle">ğŸ“‹ Ø¨Ù†ÙˆØ¯ Ø§Ù„Ø§ØªÙØ§Ù‚ÙŠØ©</div>
            
            <ul class="terms-list" id="termsList">
                <li>
                    <strong>Ø·Ø¨ÙŠØ¹Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</strong>
                    ÙŠÙÙ‚Ø± Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± Ø¨Ø£Ù† Sarmad Protocol Ù‡Ùˆ Ù…Ø´Ø±ÙˆØ¹ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…Ø¨Ù†ÙŠ Ø¹Ù„Ù‰ Ø´Ø¨ÙƒØ© Ù„Ø§Ù…Ø±ÙƒØ²ÙŠØ© Ø®Ø§ØµØ©. Ø§Ù„Ø¹Ù…Ù„Ø© (SRMD) Ù‡ÙŠ Ø£Ø¯Ø§Ø© Ø¯ÙØ¹ Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø«Ù‚ÙŠÙ„Ø© ÙÙ‚Ø·ØŒ ÙˆÙ„ÙŠØ³Øª ÙˆØ±Ù‚Ø© Ù…Ø§Ù„ÙŠØ© Ø£Ùˆ Ø³Ù‡Ù… Ù…Ù„ÙƒÙŠØ©.
                </li>
                <li>
                    <strong>Ø¢Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡ ÙˆØ§Ù„ØªÙˆØ²ÙŠØ¹</strong>
                    ÙŠØªÙ… Ø´Ø±Ø§Ø¡ Ø¹Ù…Ù„Ø§Øª SRMD Ø¨Ø³Ø¹Ø± Ø§Ø¨ØªØ¯Ø§Ø¡Ø§ Ù…Ù† (0.05 USDT) ÙˆØªÙˆØ²ÙŠØ¹Ù‡Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± Ø¨Ø´ÙƒÙ„ ÙŠÙˆÙ…ÙŠ Ù…ØªØ³Ø§ÙˆÙ Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„Ù…Ø³ØªØ«Ù…Ø±ÙŠÙ† Ø¨Ø¥Ù†ØªØ§Ø¬ ÙŠÙˆÙ…ÙŠ Ù…Ù‚Ø¯Ø§Ø±Ù‡ 86400 Ø³Ø±Ù…Ø¯ ØªÙ‚Ø±ÙŠØ¨Ø§ ÙˆÙ„Ø§ ÙŠÙ…ÙƒÙ† Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬ ÙÙŠ Ø£ÙŠ Ø­Ø§Ù„ Ù…Ù† Ø§Ù„Ø£Ø­ÙˆØ§Ù„ ÙÙˆØ± Ø¨Ø¯Ø¡ Ø§Ù†ØªØ§Ø¬ Ø¨Ù„ÙˆÙƒØ§Øª Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙˆØ³ÙŠØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø¨Ø§Ø¨ Ø§Ù„Ø´Ø±Ø§Ø¡ Ù‡Ø°Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚ Ø¨Ø£ÙŠØ§Ù….
                </li>
                <li>
                    <strong>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù</strong>
                    ÙŠÙØ¹Ù„Ù… Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± Ø¨Ø£Ù† Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚ (0.50 USDT) Ù‡Ùˆ ØªÙ‚Ø¯ÙŠØ± ØªØ³ÙˆÙŠÙ‚ÙŠ Ø¨Ø­Øª ÙˆØºÙŠØ± Ù…Ø¶Ù…ÙˆÙ†. Ø§Ù„Ø³Ø¹Ø± Ø§Ù„ÙØ¹Ù„ÙŠ ÙŠØªØ­Ø¯Ø¯ Ø­ØµØ±ÙŠØ§Ù‹ Ø­Ø³Ø¨ Ø§Ù„Ø¹Ø±Ø¶ ÙˆØ§Ù„Ø·Ù„Ø¨ ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø­Ø±.
                </li>
                <li>
                    <strong>Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± Ø§Ù„ÙƒØ§Ù…Ù„Ø©</strong>
                    ÙŠÙ‚Ø± Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± Ø¨Ø£Ù†Ù‡ ÙŠÙÙ‡Ù… Ø£Ù† Ø§Ø³ØªØ«Ù…Ø§Ø±Ù‡ Ù‚Ø¯ ÙŠØ¤Ø¯ÙŠ Ø¥Ù„Ù‰ Ø®Ø³Ø§Ø±Ø© ÙƒÙ„ÙŠØ© Ù„Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹. Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¶Ù…Ø§Ù†Ø§Øª Ù„Ù„Ø¹Ø§Ø¦Ø¯ Ø£Ùˆ Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ Ø£Ùˆ Ø§Ù„Ø³ÙŠÙˆÙ„Ø©.
                </li>
                <li>
                    <strong>ÙØ´Ù„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</strong>
                    ÙÙŠ Ø­Ø§Ù„ ÙØ´Ù„ Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ø´Ø¨ÙƒØ© Ø£Ùˆ Ø¹Ø¯Ù… ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø£Ùˆ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©ØŒ Ù„Ø§ ÙŠØ­Ù‚ Ù„Ù„Ù…Ø³ØªØ«Ù…Ø± Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø© Ø¨Ø£ÙŠ ØªØ¹ÙˆÙŠØ¶ Ø£Ùˆ Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ù„Ù„Ø£Ù…ÙˆØ§Ù„ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø©.
                </li>
                <li>
                    <strong>Ø§Ù„ØªØ£Ø®ÙŠØ± ÙÙŠ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚</strong>
                    Ù‚Ø¯ ÙŠØªØ£Ø®Ø± Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ø´Ø¨ÙƒØ© Ù„Ø£Ø³Ø¨Ø§Ø¨ ØªÙ‚Ù†ÙŠØ© Ø£Ùˆ ØªÙ†Ø¸ÙŠÙ…ÙŠØ© Ø¯ÙˆÙ† Ø¥Ø´Ø¹Ø§Ø± Ù…Ø³Ø¨Ù‚ØŒ ÙˆÙ„Ø§ ÙŠØªØ±ØªØ¨ Ø¹Ù„Ù‰ Ø°Ù„Ùƒ Ø£ÙŠ Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ù…Ø§Ù„ÙŠØ© Ø¹Ù„Ù‰ Sarmad Protocol.
                </li>
                <li>
                    <strong>Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ù…Ø­Ø¯ÙˆØ¯</strong>
                    Ø§Ù„Ø¹Ù…Ù„Ø© Ù…Ø®ØµØµØ© Ø­ØµØ±ÙŠØ§Ù‹ Ù„Ø¯ÙØ¹ Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø«Ù‚ÙŠÙ„Ø©. Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø§Ù„Ù†ØµÙŠØ© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø¬Ø§Ù†ÙŠØ© ÙˆÙ„Ø§ ØªØªØ·Ù„Ø¨ Ø¹Ù…Ù„Ø§Øª.
                </li>
                <li>
                    <strong>ØºÙŠØ§Ø¨ Ø§Ù„Ø¶Ù…Ø§Ù†Ø§Øª</strong>
                    Ù„Ø§ ØªØªØ¹Ù‡Ø¯ Sarmad Protocol Ø¨Ø¥Ø¯Ø±Ø§Ø¬ Ø§Ù„Ø¹Ù…Ù„Ø© ÙÙŠ Ø£ÙŠ Ù…Ù†ØµØ© ØªØ¯Ø§ÙˆÙ„. Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø¨ÙŠØ¹ Ø£Ùˆ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø© ØºÙŠØ± Ù…Ø¶Ù…ÙˆÙ†Ø© ÙˆØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø³ÙˆÙ‚ Ø¯Ø§Ø®Ù„ÙŠ Ø­Ø±.
                </li>
                <li>
                    <strong>Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© ÙˆØ§Ù„Ø¶Ø±ÙŠØ¨ÙŠØ©</strong>
                    ÙŠØªØ­Ù…Ù„ Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± ÙƒØ§Ù…Ù„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø¹Ù† Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„ Ù„Ù‚ÙˆØ§Ù†ÙŠÙ† Ø¨Ù„Ø¯Ù‡ Ùˆ Ø§Ù„ØªØ²Ø§Ù…Ø§ØªÙ‡ Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠØ©. Sarmad Protocol ØºÙŠØ± Ù…Ø³Ø¤ÙˆÙ„Ø© Ø¹Ù† Ø£ÙŠ Ø¹ÙˆØ§Ù‚Ø¨ Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ø£Ùˆ Ø¶Ø±ÙŠØ¨ÙŠØ©.
                </li>
                <li>
                    <strong>Ø§Ù„ØªÙ†Ø§Ø²Ù„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¹Ù† Ø§Ù„Ø¯Ø¹Ø§ÙˆÙ‰</strong>
                    Ø¨Ù…ÙˆØ¬Ø¨ Ù‡Ø°Ù‡ Ø§Ù„Ø§ØªÙØ§Ù‚ÙŠØ©ØŒ ÙŠØªÙ†Ø§Ø²Ù„ Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù† Ø£ÙŠ Ø­Ù‚ ÙÙŠ Ø±ÙØ¹ Ø¯Ø¹Ø§ÙˆÙ‰ Ù‚Ø¶Ø§Ø¦ÙŠØ© Ø£Ùˆ Ù…Ø·Ø§Ù„Ø¨Ø§Øª Ø¶Ø¯ Sarmad Protocol Ø£Ùˆ ÙØ±ÙŠÙ‚Ù‡Ø§ Ø¨Ø®ØµÙˆØµ Ù‡Ø°Ø§ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±.
                </li>
            </ul>

            <div class="highlight-box">
                <div class="highlight-title" id="riskTitle">âš ï¸ ØªÙ†Ø¨ÙŠÙ‡ Ù‡Ø§Ù…</div>
                <p id="riskText">
                    Ù‡Ø°Ø§ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± Ø¹Ø§Ù„ÙŠ Ø§Ù„Ù…Ø®Ø§Ø·Ø± ÙˆØºÙŠØ± Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø¬Ù…ÙŠØ¹. Ù‚Ø¯ ÙŠØ®Ø³Ø± Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± ÙƒØ§Ù…Ù„ Ù…Ø¨Ù„ØºÙ‡. Ù„Ø§ ÙŠØ¬Ø¨ Ø§Ø³ØªØ«Ù…Ø§Ø± Ù…Ø§Ù„ Ù„Ø§ ÙŠØªØ­Ù…Ù„ Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± Ø®Ø³Ø§Ø±ØªÙ‡.
                </p>
            </div>
        </div>

        <div class="agree-section">
            <label class="checkbox-container">
                <input type="checkbox" id="agreeCheck" onchange="checkAgreement()">
                <span class="checkbox-text" id="agreeText">
                    <strong>ÙŠÙ‚Ø± Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± Ø¨Ø£Ù†Ù‡ Ù‚Ø±Ø£ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ù†ÙˆØ¯ Ø£Ø¹Ù„Ø§Ù‡</strong> ÙˆÙˆØ§ÙÙ‚ Ø¹Ù„ÙŠÙ‡Ø§ ÙƒÙ„ÙŠØ§Ù‹. ÙŠÙÙ‡Ù… Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± Ø·Ø¨ÙŠØ¹Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ù…Ø­ÙŠØ·Ø© Ø¨Ù‡ ÙˆÙŠØªÙ†Ø§Ø²Ù„ Ø¹Ù† Ø£ÙŠ Ø­Ù‚ÙˆÙ‚ Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ù‚Ø¯ ØªØªØ±ØªØ¨ Ø¹Ù„Ù‰ ÙØ´Ù„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø£Ùˆ Ø¹Ø¯Ù… ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª.
                </span>
            </label>
        </div>

        <button class="agreement-btn" id="continueBtn" onclick="acceptAgreement()" disabled>
            Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© ÙˆØ§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ù„Ù„ØªØ³Ø¬ÙŠÙ„
        </button>
        
        <div class="footer-note" id="footerNote">
            Ø¨Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©"ØŒ ÙŠØ¤ÙƒØ¯ Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± Ù…ÙˆØ§ÙÙ‚ØªÙ‡ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø±ÙˆØ· Ø£Ø¹Ù„Ø§Ù‡
        </div>
    </div>
</div>

<div id="walletApp" class="wallet-app">
    <header>
        <div class="logo-container"><div class="logo">SARMAD PROTOCOL</div></div>
        <div class="sub-header">
            <div id="header-user" class="user-id">Guest</div>
            <button class="clickable" onclick="toggleLang()" id="lang-switcher">Ø¹Ø±Ø¨ÙŠ</button>
        </div>
    </header>
    
    <div class="container">
        <div id="auth-ui" class="card">
            <h3 id="t-login-title">Investor Login</h3>
            <input type="tel" id="phone" placeholder="+962xxxxxxxxx" autocomplete="tel">
            <div id="recaptcha-container"></div>
            <button class="clickable main-btn" onclick="sendOTP()" id="t-send-otp">Send Code</button>
            <div id="otp-area" class="hidden">
                <input type="text" id="otp" placeholder="000000" maxlength="6" autocomplete="one-time-code">
                <button class="clickable main-btn" onclick="verifyOTP()" id="t-verify-otp">Verify</button>
            </div>
        </div>

        <div id="main-ui" class="hidden">
            <div class="stats-box">
                <div class="stat-item">
                    <span class="stat-label" id="t-total-coins-label">Total Sold SRMD</span>
                    <span class="stat-val" id="global-srmd-count">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label" id="t-total-investors-label">Active Investors</span>
                    <span class="stat-val" id="global-investors-count">0</span>
                </div>
            </div>

            <div class="card" style="border:1px dashed var(--gold);">
                <span id="t-deposit-title" style="font-size:0.85rem;font-weight:bold;">Deposit Address (USDT-TRC20)</span>
                <div class="wallet-box" onclick="copyWallet()">TH9uvbgRL4gG2Ad3255hWTHco6jQt13G6N</div>
                <small id="t-copy-hint" style="color:var(--grey);font-size:0.75rem;">ğŸ’¡Tap address to copy</small>
            </div>

            <div class="card">
                <span id="t-balance-label" style="font-size:0.9rem;color:var(--grey);">Your SRMD Balance</span>
                <span class="balance-val" id="total-balance">0.00</span>
                <span class="clickable price-text" id="t-price-info" onclick="showPriceInfo()">
                    1 SRMD = <span id="current-price">0.00</span> USDT
                </span>
                
                <div class="usd-val">
                    <span id="t-usd-label">Total Value:</span> <span id="total-usd" style="color:var(--gold);font-weight:bold;">0.00</span> USDT
                </div>
            </div>

            <div class="card">
                <h4 id="t-buy-title" style="margin:0 0 15px 0;">Purchase Request</h4>
                <textarea id="txid-input" placeholder="Enter your 64-character TXID here" maxlength="64" oninput="checkTxLength()" rows="3"></textarea>
                <div class="char-counter" id="char-counter">0/64 characters</div>
                <button class="clickable main-btn" onclick="submitNewRequest()" id="t-submit-btn" disabled>Submit Request</button>
                <small style="display:block;margin-top:10px;color:var(--grey);font-size:0.75rem;" id="t-txid-hint">
                    âš ï¸ Make sure to send USDT to the address above before submitting
                </small>
            </div>

            <div class="card">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;">
                    <h4 id="t-history-title" style="margin:0;">Transaction History</h4>
                    <button class="clickable" onclick="loadInvestorData(true)" id="t-refresh-btn" style="font-size:0.7rem;">Refresh</button>
                </div>
                <div id="history-container">
                    <table id="history-table" class="hidden">
                        <thead>
                            <tr>
                                <th style="text-align:left;color:var(--grey);font-size:0.75rem;padding:10px;">TXID</th>
                                <th style="text-align:center;color:var(--grey);font-size:0.75rem;padding:10px;">Status</th>
                            </tr>
                        </thead>
                        <tbody id="history-body"></tbody>
                    </table>
                    <div id="empty-history" class="empty-state">
                        <p>ğŸ“‹ No transactions yet</p>
                        <small>Your purchase requests will appear here</small>
                    </div>
                </div>
            </div>

            <button class="clickable" style="width:100%;margin-top:10px;border:none;color:var(--grey)" onclick="handleLogout()" id="t-logout">Logout</button>
        </div>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

<script>
// Firebase Config
const firebaseConfig = {
    apiKey: "AIzaSyBVyEPs_xvz9Oryk-jpLev4ja7Sb1P6RaM",
    authDomain: "sarmad-web.firebaseapp.com",
    projectId: "sarmad-web",
    storageBucket: "sarmad-web.firebasestorage.app",
    messagingSenderId: "687271413195",
    appId: "1:687271413195:web:f9564027c56ed0efb7e24e"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

// Global Variables
let currentLang = 'en';
let srmdPrice = 0;
let confirmationResult = null;
let agreementAccepted = false;

// Agreement Data
const agreementData = {
    ar: {
        subtitle: "Ø§ØªÙØ§Ù‚ÙŠØ© Ø´Ø±Ø§Ø¡ Ø¹Ù…Ù„Ø§Øª SRMD Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©",
        termsTitle: "ğŸ“‹ Ø¨Ù†ÙˆØ¯ Ø§Ù„Ø§ØªÙØ§Ù‚ÙŠØ©",
        terms: [
            { title: "Ø·Ø¨ÙŠØ¹Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹", text: "ÙŠÙÙ‚Ø± Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± Ø¨Ø£Ù† Sarmad Protocol Ù‡Ùˆ Ù…Ø´Ø±ÙˆØ¹ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…Ø¨Ù†ÙŠ Ø¹Ù„Ù‰ Ø´Ø¨ÙƒØ© Ù„Ø§Ù…Ø±ÙƒØ²ÙŠØ© Ø®Ø§ØµØ©. Ø§Ù„Ø¹Ù…Ù„Ø© (SRMD) Ù‡ÙŠ Ø£Ø¯Ø§Ø© Ø¯ÙØ¹ Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø«Ù‚ÙŠÙ„Ø© ÙÙ‚Ø·ØŒ ÙˆÙ„ÙŠØ³Øª ÙˆØ±Ù‚Ø© Ù…Ø§Ù„ÙŠØ© Ø£Ùˆ Ø³Ù‡Ù… Ù…Ù„ÙƒÙŠØ©." },
            { title: "Ø¢Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡ ÙˆØ§Ù„ØªÙˆØ²ÙŠØ¹", text: "ÙŠØªÙ… Ø´Ø±Ø§Ø¡ Ø¹Ù…Ù„Ø§Øª SRMD Ø¨Ø³Ø¹Ø± Ø§Ù„ÙŠÙˆÙ… (0.10 USDT) ÙˆØªÙˆØ²ÙŠØ¹Ù‡Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± Ø¨Ø´ÙƒÙ„ ÙŠÙˆÙ…ÙŠ Ù…ØªØ³Ø§ÙˆÙ Ù„Ù…Ø¯Ø© 365 ÙŠÙˆÙ…Ø§Ù‹ ÙÙˆØ± Ø¨Ø¯Ø¡ Ø¥Ù†ØªØ§Ø¬ Ø¨Ù„ÙˆÙƒØ§Øª Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©." },
            { title: "Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù", text: "ÙŠÙØ¹Ù„Ù… Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± Ø¨Ø£Ù† Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚ (0.50 USDT) Ù‡Ùˆ ØªÙ‚Ø¯ÙŠØ± ØªØ³ÙˆÙŠÙ‚ÙŠ Ø¨Ø­Øª ÙˆØºÙŠØ± Ù…Ø¶Ù…ÙˆÙ†. Ø§Ù„Ø³Ø¹Ø± Ø§Ù„ÙØ¹Ù„ÙŠ ÙŠØªØ­Ø¯Ø¯ Ø­ØµØ±ÙŠØ§Ù‹ Ø­Ø³Ø¨ Ø§Ù„Ø¹Ø±Ø¶ ÙˆØ§Ù„Ø·Ù„Ø¨ ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø­Ø±." },
            { title: "Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± Ø§Ù„ÙƒØ§Ù…Ù„Ø©", text: "ÙŠÙ‚Ø± Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± Ø¨Ø£Ù†Ù‡ ÙŠÙÙ‡Ù… Ø£Ù† Ø§Ø³ØªØ«Ù…Ø§Ø±Ù‡ Ù‚Ø¯ ÙŠØ¤Ø¯ÙŠ Ø¥Ù„Ù‰ Ø®Ø³Ø§Ø±Ø© ÙƒÙ„ÙŠØ© Ù„Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹. Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¶Ù…Ø§Ù†Ø§Øª Ù„Ù„Ø¹Ø§Ø¦Ø¯ Ø£Ùˆ Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ Ø£Ùˆ Ø§Ù„Ø³ÙŠÙˆÙ„Ø©." },
            { title: "ÙØ´Ù„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹", text: "ÙÙŠ Ø­Ø§Ù„ ÙØ´Ù„ Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ø´Ø¨ÙƒØ© Ø£Ùˆ Ø¹Ø¯Ù… ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø£Ùˆ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©ØŒ Ù„Ø§ ÙŠØ­Ù‚ Ù„Ù„Ù…Ø³ØªØ«Ù…Ø± Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø© Ø¨Ø£ÙŠ ØªØ¹ÙˆÙŠØ¶ Ø£Ùˆ Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ù„Ù„Ø£Ù…ÙˆØ§Ù„ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø©." },
            { title: "Ø§Ù„ØªØ£Ø®ÙŠØ± ÙÙŠ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚", text: "Ù‚Ø¯ ÙŠØªØ£Ø®Ø± Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ø´Ø¨ÙƒØ© Ù„Ø£Ø³Ø¨Ø§Ø¨ ØªÙ‚Ù†ÙŠØ© Ø£Ùˆ ØªÙ†Ø¸ÙŠÙ…ÙŠØ© Ø¯ÙˆÙ† Ø¥Ø´Ø¹Ø§Ø± Ù…Ø³Ø¨Ù‚ØŒ ÙˆÙ„Ø§ ÙŠØªØ±ØªØ¨ Ø¹Ù„Ù‰ Ø°Ù„Ùƒ Ø£ÙŠ Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ù…Ø§Ù„ÙŠØ© Ø¹Ù„Ù‰ Sarmad Protocol." },
            { title: "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ù…Ø­Ø¯ÙˆØ¯", text: "Ø§Ù„Ø¹Ù…Ù„Ø© Ù…Ø®ØµØµØ© Ø­ØµØ±ÙŠØ§Ù‹ Ù„Ø¯ÙØ¹ Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø«Ù‚ÙŠÙ„Ø©. Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø§Ù„Ù†ØµÙŠØ© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø¬Ø§Ù†ÙŠØ© ÙˆÙ„Ø§ ØªØªØ·Ù„Ø¨ Ø¹Ù…Ù„Ø§Øª." },
            { title: "ØºÙŠØ§Ø¨ Ø§Ù„Ø¶Ù…Ø§Ù†Ø§Øª", text: "Ù„Ø§ ØªØªØ¹Ù‡Ø¯ Sarmad Protocol Ø¨Ø¥Ø¯Ø±Ø§Ø¬ Ø§Ù„Ø¹Ù…Ù„Ø© ÙÙŠ Ø£ÙŠ Ù…Ù†ØµØ© ØªØ¯Ø§ÙˆÙ„. Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø¨ÙŠØ¹ Ø£Ùˆ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø© Ù…Ø¶Ù…ÙˆÙ†Ø© Ø¹Ù„Ù‰ Ù…ÙˆÙ‚Ø¹ Ø³Ø±Ù…Ø¯ Ø§Ù„Ø±Ø³Ù…ÙŠ ÙÙ‚Ø·." },
            { title: "Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© ÙˆØ§Ù„Ø¶Ø±ÙŠØ¨ÙŠØ©", text: "ÙŠØªØ­Ù…Ù„ Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± ÙƒØ§Ù…Ù„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø¹Ù† Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„ Ù„Ù‚ÙˆØ§Ù†ÙŠÙ† Ø¨Ù„Ø¯Ù‡ ÙˆØ§Ù„ØªØ²Ø§Ù…Ø§ØªÙ‡ Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠØ©. Sarmad Protocol ØºÙŠØ± Ù…Ø³Ø¤ÙˆÙ„Ø© Ø¹Ù† Ø£ÙŠ Ø¹ÙˆØ§Ù‚Ø¨ Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ø£Ùˆ Ø¶Ø±ÙŠØ¨ÙŠØ©." },
            { title: "Ø§Ù„ØªÙ†Ø§Ø²Ù„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¹Ù† Ø§Ù„Ø¯Ø¹Ø§ÙˆÙ‰", text: "Ø¨Ù…ÙˆØ¬Ø¨ Ù‡Ø°Ù‡ Ø§Ù„Ø§ØªÙØ§Ù‚ÙŠØ©ØŒ ÙŠØªÙ†Ø§Ø²Ù„ Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù† Ø£ÙŠ Ø­Ù‚ ÙÙŠ Ø±ÙØ¹ Ø¯Ø¹Ø§ÙˆÙ‰ Ù‚Ø¶Ø§Ø¦ÙŠØ© Ø£Ùˆ Ù…Ø·Ø§Ù„Ø¨Ø§Øª Ø¶Ø¯ Sarmad Protocol Ø£Ùˆ ÙØ±ÙŠÙ‚Ù‡Ø§ Ø¨Ø®ØµÙˆØµ Ù‡Ø°Ø§ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±." }
        ],
        riskTitle: "âš ï¸ ØªÙ†Ø¨ÙŠÙ‡ Ù‡Ø§Ù…",
        riskText: "Ù‡Ø°Ø§ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± Ø¹Ø§Ù„ÙŠ Ø§Ù„Ù…Ø®Ø§Ø·Ø± ÙˆØºÙŠØ± Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø¬Ù…ÙŠØ¹. Ù‚Ø¯ ÙŠØ®Ø³Ø± Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± ÙƒØ§Ù…Ù„ Ù…Ø¨Ù„ØºÙ‡. Ù„Ø§ ÙŠØ¬Ø¨ Ø§Ø³ØªØ«Ù…Ø§Ø± Ù…Ø§Ù„ Ù„Ø§ ÙŠØªØ­Ù…Ù„ Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± Ø®Ø³Ø§Ø±ØªÙ‡.",
        agreeText: "<strong>ÙŠÙ‚Ø± Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± Ø¨Ø£Ù†Ù‡ Ù‚Ø±Ø£ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ù†ÙˆØ¯ Ø£Ø¹Ù„Ø§Ù‡</strong> ÙˆÙˆØ§ÙÙ‚ Ø¹Ù„ÙŠÙ‡Ø§ ÙƒÙ„ÙŠØ§Ù‹. ÙŠÙÙ‡Ù… Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± Ø·Ø¨ÙŠØ¹Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ù…Ø­ÙŠØ·Ø© Ø¨Ù‡ ÙˆÙŠØªÙ†Ø§Ø²Ù„ Ø¹Ù† Ø£ÙŠ Ø­Ù‚ÙˆÙ‚ Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ù‚Ø¯ ØªØªØ±ØªØ¨ Ø¹Ù„Ù‰ ÙØ´Ù„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø£Ùˆ Ø¹Ø¯Ù… ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª.",
        button: "Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© ÙˆØ§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ù„Ù„ØªØ³Ø¬ÙŠÙ„",
        footer: "Ø¨Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ 'Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©'ØŒ ÙŠØ¤ÙƒØ¯ Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± Ù…ÙˆØ§ÙÙ‚ØªÙ‡ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø±ÙˆØ· Ø£Ø¹Ù„Ø§Ù‡",
        langBtn: "English"
    },
    en: {
        subtitle: "SRMD Token Purchase Agreement",
        termsTitle: "ğŸ“‹ Terms of Agreement",
        terms: [
            { title: "Project Nature", text: "The Investor acknowledges that Sarmad Protocol is an AI project built on a private decentralized network. The token (SRMD) is a payment tool for heavy usage subscriptions only, not a security or equity share." },
            { title: "Purchase & Distribution", text: "SRMD tokens are purchased at today's price that starts from (0.05 USDT) and distributed to the Investors equally daily by producing upto 86400 SRMD upon mainnet block production starts and this number cannot be exceeded." },
            { title: "Target Price", text: "The Investor is informed that the target launch price (0.50 USDT) is a pure marketing estimate and NOT guaranteed. Actual price is determined solely by free market supply and demand." },
            { title: "Full Investment Risks", text: "The Investor acknowledges understanding that the investment may result in total loss of paid amount. No guarantees for return, capital, or liquidity." },
            { title: "Project Failure", text: "In case of network launch failure or failure to achieve technical/commercial goals, the Investor has no right to claim compensation or refund of paid funds." },
            { title: "Launch Delay", text: "Network launch may be delayed for technical or regulatory reasons without prior notice, with no financial liability on Sarmad Protocol." },
            { title: "Limited Token Usage", text: "Token is exclusively for paying AI heavy usage subscriptions. Text conversations for information are free and require no tokens." },
            { title: "No Guarantees", text: "Sarmad Protocol does not commit to listing token on any exchange. Ability to sell or transfer is guaranteed on Sarmadprotocol.com only." },
            { title: "Legal & Tax Liability", text: "The Investor bears full responsibility for compliance with country laws and tax obligations. Sarmad Protocol is not liable for any legal or tax consequences." },
            { title: "Final Waiver of Claims", text: "By this agreement, the Investor permanently waives any right to file lawsuits or claims against Sarmad Protocol or its team regarding this investment." }
        ],
        riskTitle: "âš ï¸ Important Warning",
        riskText: "This is a high-risk investment not suitable for everyone. The Investor may lose entire amount. Do not invest money the Investor cannot afford to lose.",
        agreeText: "<strong>The Investor confirms having read all terms above</strong> and fully agrees to them. The Investor understands project nature and associated risks and waives any legal rights arising from project failure or unmet expectations.",
        button: "Agree and Continue to Registration",
        footer: "By clicking 'Agree', the Investor confirms legal acceptance of all terms above",
        langBtn: "Ø¹Ø±Ø¨ÙŠ"
    }
};

// Language Data for Wallet
const langData = {
    en: {
        switcher: 'Ø¹Ø±Ø¨ÙŠ',
        loginTitle: 'Investor Login',
        sendOtp: 'Send Code',
        verifyOtp: 'Verify',
        depositTitle: 'Deposit Address (USDT-TRC20)',
        copyHint: 'ğŸ’¡Tap address to copy',
        balanceLabel: 'Your SRMD Balance',
        usdLabel: 'Total Value:',
        buyTitle: 'Purchase Request',
        submitBtn: 'Submit Request',
        historyTitle: 'Transaction History',
        refresh: 'Refresh',
        logout: 'Logout',
        totalCoins: 'Total Sold SRMD',
        totalInvestors: 'Active Investors',
        priceMsg: 'This price is subject to increase as the launch date approaches.',
        txidHint: 'âš ï¸Make sure to send USDT to the address above before submitting',
        pending: 'Pending',
        approved: 'Approved',
        rejected: 'Rejected',
        invalid_txid: 'Invalid TXID',
        used_txid: 'Already Used',
        amount_mismatch: 'Amount Error',
        wrong_network: 'Wrong Network',
        copied: 'âœ…Copied to clipboard!',
        enterPhone: 'Please enter your phone number',
        enterOtp: 'Please enter OTP code',
        txidUsed: 'âŒThis TXID has already been used!',
        txidSuccess: 'âœ…Request submitted successfully!',
        txidInvalid: 'âŒPlease enter a valid 64-character TXID',
        noHistory: 'No transactions yet',
        noHistoryDesc: 'Your purchase requests will appear here'
    },
    ar: {
        switcher: 'EN',
        loginTitle: 'ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ«Ù…Ø±',
        sendOtp: 'Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø²',
        verifyOtp: 'ØªØ£ÙƒÙŠØ¯',
        depositTitle: 'Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ (USDT-TRC20)',
        copyHint: 'ğŸ’¡Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù„Ù„Ù†Ø³Ø®',
        balanceLabel: 'Ø±ØµÙŠØ¯Ùƒ Ù…Ù† SRMD',
        usdLabel: 'Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©:',
        buyTitle: 'Ø·Ù„Ø¨ Ø´Ø±Ø§Ø¡',
        submitBtn: 'Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨',
        historyTitle: 'Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª',
        refresh: 'ØªØ­Ø¯ÙŠØ«',
        logout: 'Ø®Ø±ÙˆØ¬',
        totalCoins: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©',
        totalInvestors: 'Ø§Ù„Ù…Ø³ØªØ«Ù…Ø±ÙˆÙ† Ø§Ù„Ù†Ø´Ø·ÙˆÙ†',
        priceMsg: 'Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¹Ø± Ù‚Ø§Ø¨Ù„ Ù„Ù„Ø²ÙŠØ§Ø¯Ø© Ù…Ø¹ Ø§Ù‚ØªØ±Ø§Ø¨ Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚.',
        txidHint: 'âš ï¸ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø±Ø³Ø§Ù„ USDT Ù„Ù„Ø¹Ù†ÙˆØ§Ù† Ø£Ø¹Ù„Ø§Ù‡ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„',
        pending: 'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±',
        approved: 'ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©',
        rejected: 'Ù…Ø±ÙÙˆØ¶',
        invalid_txid: 'Ø±Ù‚Ù… ØºÙŠØ± ØµØ­ÙŠØ­',
        used_txid: 'Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¨Ù‚Ø§Ù‹',
        amount_mismatch: 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø¨Ù„Øº',
        wrong_network: 'Ø´Ø¨ÙƒØ© Ø®Ø§Ø·Ø¦Ø©',
        copied: 'âœ…ØªÙ… Ø§Ù„Ù†Ø³Ø®!',
        enterPhone: 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ',
        enterOtp: 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚',
        txidUsed: 'âŒÙ‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù… Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¨Ù‚Ø§Ù‹!',
        txidSuccess: 'âœ…ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­!',
        txidInvalid: 'âŒØ§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… ØµØ­ÙŠØ­ Ù…Ù† 64 Ø­Ø±Ù',
        noHistory: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø¨Ø¹Ø¯',
        noHistoryDesc: 'Ø³ØªØ¸Ù‡Ø± Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø´Ø±Ø§Ø¡ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ Ù‡Ù†Ø§'
    }
};

// Agreement Functions
function toggleAgreementLang() {
    currentLang = currentLang === 'ar' ? 'en' : 'ar';
    const data = agreementData[currentLang];
    
    document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
    
    document.getElementById('agreeSubtitle').textContent = data.subtitle;
    document.getElementById('termsTitle').textContent = data.termsTitle;
    document.getElementById('riskTitle').textContent = data.riskTitle;
    document.getElementById('riskText').textContent = data.riskText;
    document.getElementById('agreeText').innerHTML = data.agreeText;
    document.getElementById('continueBtn').textContent = data.button;
    document.getElementById('footerNote').textContent = data.footer;
    document.querySelector('.lang-switch').textContent = data.langBtn;
    
    const list = document.getElementById('termsList');
    list.innerHTML = '';
    data.terms.forEach(term => {
        const li = document.createElement('li');
        li.innerHTML = `<strong>${term.title}</strong>${term.text}`;
        list.appendChild(li);
    });
}

function checkAgreement() {
    const checked = document.getElementById('agreeCheck').checked;
    document.getElementById('continueBtn').disabled = !checked;
}

function acceptAgreement() {
    agreementAccepted = true;
    localStorage.setItem('sarmad_agreement_accepted', 'true');
    localStorage.setItem('sarmad_agreement_date', new Date().toISOString());
    
    document.getElementById('agreementPage').style.display = 'none';
    document.getElementById('walletApp').style.display = 'block';
    document.getElementById('walletApp').classList.remove('wallet-app');
    
    // Initialize wallet
    initWallet();
}

// Check if agreement already accepted
window.onload = function() {
    if (localStorage.getItem('sarmad_agreement_accepted') === 'true') {
        document.getElementById('agreementPage').style.display = 'none';
        document.getElementById('walletApp').style.display = 'block';
        document.getElementById('walletApp').classList.remove('wallet-app');
        initWallet();
    }
};

function initWallet() {
    // Auth state listener
    auth.onAuthStateChanged(user => {
        if (user) {
            document.getElementById('auth-ui').classList.add('hidden');
            document.getElementById('main-ui').classList.remove('hidden');
            document.getElementById('header-user').innerText = user.phoneNumber || "User";
            
            // Listen to price changes (With Safety Check)
            db.collection('settings').doc('prices').onSnapshot(snap => {
                if (snap.exists) {
                    const data = snap.data();
                    srmdPrice = data && data.srmd_price ? data.srmd_price : 0;
                    document.getElementById('current-price').innerText = srmdPrice.toFixed(2);
                    updateTotalUSD();
                }
            });
            
            // Listen to global stats (With Safety Check)
            db.collection('investors').onSnapshot(snap => {
                let totalCoins = 0;
                document.getElementById('global-investors-count').innerText = snap.size;
                snap.forEach(doc => {
                    const d = doc.data();
                    if(d && d.balance) {
                        totalCoins += d.balance;
                    }
                });
                document.getElementById('global-srmd-count').innerText = totalCoins.toLocaleString();
            });
            
            loadInvestorData();
        }
    });
}

// Wallet Functions
function startCooldown(id, text) {
    const b = document.getElementById(id);
    if (!b) return;
    b.disabled = true;
    let c = 10;
    const timer = setInterval(() => {
        b.innerText = c + "s";
        c--;
        if (c < 0) {
            clearInterval(timer);
            b.disabled = false;
            b.innerText = text;
        }
    }, 1000);
}

function toggleLang() {
    currentLang = currentLang === 'en' ? 'ar' : 'en';
    document.getElementById('main-html').dir = currentLang === 'ar' ? 'rtl' : 'ltr';
    document.getElementById('body-tag').className = currentLang === 'ar' ? 'ar-mode' : '';
    
    const elements = {
        'lang-switcher': 'switcher',
        't-login-title': 'loginTitle',
        't-send-otp': 'sendOtp',
        't-verify-otp': 'verifyOtp',
        't-deposit-title': 'depositTitle',
        't-copy-hint': 'copyHint',
        't-balance-label': 'balanceLabel',
        't-usd-label': 'usdLabel',
        't-buy-title': 'buyTitle',
        't-submit-btn': 'submitBtn',
        't-history-title': 'historyTitle',
        't-refresh-btn': 'refresh',
        't-logout': 'logout',
        't-total-coins-label': 'totalCoins',
        't-total-investors-label': 'totalInvestors',
        't-txid-hint': 'txidHint'
    };
    
    Object.keys(elements).forEach(id => {
        const el = document.getElementById(id);
        if (el && langData[currentLang][elements[id]]) {
            el.innerText = langData[currentLang][elements[id]];
        }
    });
    
    const emptyHistory = document.getElementById('empty-history');
    if (emptyHistory && !emptyHistory.classList.contains('hidden')) {
        emptyHistory.innerHTML = `
            <p>${langData[currentLang].noHistory}</p>
            <small>${langData[currentLang].noHistoryDesc}</small>
        `;
    }
    
    if (auth.currentUser) {
        loadInvestorData();
    }
}

function showPriceInfo() {
    alert(langData[currentLang].priceMsg);
}

function copyWallet() {
    const wallet = "TH9uvbgRL4gG2Ad3255hWTHco6jQt13G6N";
    navigator.clipboard.writeText(wallet)
        .then(() => alert(langData[currentLang].copied))
        .catch(err => console.error('Copy failed:', err));
}

function handleLogout() {
    if (confirm('Are you sure you want to logout?')) {
        auth.signOut().then(() => location.reload());
    }
}

function checkTxLength() {
    const txInput = document.getElementById('txid-input');
    const btn = document.getElementById('t-submit-btn');
    const counter = document.getElementById('char-counter');
    const length = txInput.value.trim().length;
    
    counter.innerText = `${length}/64 characters`;
    
    if (length === 64) {
        btn.disabled = false;
        btn.style.opacity = "1";
        counter.classList.add('valid');
        counter.classList.remove('invalid');
    } else {
        btn.disabled = true;
        btn.style.opacity = "0.6";
        counter.classList.remove('valid');
        if (length > 0) {
            counter.classList.add('invalid');
        } else {
            counter.classList.remove('invalid');
        }
    }
}

async function sendOTP() {
    const p = document.getElementById('phone').value.trim();
    if (!p || !p.startsWith('+')) {
        alert(langData[currentLang].enterPhone);
        return;
    }
    
    try {
        if (!window.recaptchaVerifier) {
            window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {
                size: 'invisible'
            });
        }
        confirmationResult = await auth.signInWithPhoneNumber(p, window.recaptchaVerifier);
        document.getElementById('otp-area').classList.remove('hidden');
        document.getElementById('t-send-otp').classList.add('hidden');
        document.getElementById('otp').focus();
    } catch (err) {
        alert('Error: ' + err.message);
        console.error(err);
        if (window.recaptchaVerifier) {
            window.recaptchaVerifier.clear();
            window.recaptchaVerifier = null;
        }
    }
}

function verifyOTP() {
    const code = document.getElementById('otp').value.trim();
    if (!code) {
        alert(langData[currentLang].enterOtp);
        return;
    }
    confirmationResult.confirm(code)
        .then(() => location.reload())
        .catch(err => {
            alert('Invalid OTP code');
            console.error(err);
        });
}

function updateTotalUSD() {
    const bal = parseFloat(document.getElementById('total-balance').innerText) || 0;
    document.getElementById('total-usd').innerText = (bal * srmdPrice).toFixed(2);
}

function loadInvestorData(isManual = false) {
    if (!auth.currentUser) return;
    if (isManual) startCooldown('t-refresh-btn', langData[currentLang].refresh);
    
    db.collection('investors').doc(auth.currentUser.phoneNumber).get().then(doc => {
        if (doc.exists) {
            const data = doc.data();
            const bal = data.balance || 0;
            
            document.getElementById('total-balance').innerText = bal.toFixed(2);
            updateTotalUSD();
            
            const requests = data.requests || [];
            const body = document.getElementById('history-body');
            const table = document.getElementById('history-table');
            const emptyState = document.getElementById('empty-history');
            
            // Clear current table
            body.innerHTML = '';
            
            if (requests.length === 0) {
                table.classList.add('hidden');
                emptyState.classList.remove('hidden');
            } else {
                table.classList.remove('hidden');
                emptyState.classList.add('hidden');
                
                // Build HTML string first for performance
                let rowsHtml = '';
                requests.slice().reverse().forEach(req => {
                    // Safety check for properties
                    if (!req) return;
                    
                    const statusText = langData[currentLang][req.status] || req.status;
                    const reasonText = req.reasonCode ? (langData[currentLang][req.reasonCode] || req.reasonCode) : "";
                    
                    // Safety check for TXID substring to prevent crashes
                    const txStr = req.txid || "UNKNOWN";
                    const txidPreview = txStr.length > 10 
                        ? txStr.substring(0, 8) + '...' + txStr.substring(txStr.length - 6) 
                        : txStr;
                    
                    rowsHtml += `
                        <tr>
                            <td style="text-align:left;">
                                <span class="txid-preview" title="${txStr}">${txidPreview}</span>
                            </td>
                            <td class="st-${req.status}">
                                ${statusText}
                                ${reasonText ? `<small class="reason-text">${reasonText}</small>` : ''}
                            </td>
                        </tr>
                    `;
                });
                body.innerHTML = rowsHtml;
            }
        } else {
            db.collection('investors').doc(auth.currentUser.phoneNumber).set({
                balance: 0,
                requests: [],
                created_at: firebase.firestore.FieldValue.serverTimestamp()
            });
        }
    }).catch(err => {
        console.error('Error loading data:', err);
    });
}

async function submitNewRequest() {
    const tx = document.getElementById('txid-input').value.trim();
    
    if (tx.length !== 64) {
        alert(langData[currentLang].txidInvalid);
        return;
    }
    
    startCooldown('t-submit-btn', langData[currentLang].submitBtn);
    
    try {
        const txCheck = await db.collection('all_txids').doc(tx).get();
        if (txCheck.exists) {
            alert(langData[currentLang].txidUsed);
            return;
        }
        
        const batch = db.batch();
        
        batch.set(db.collection('all_txids').doc(tx), {
            used_by: auth.currentUser.phoneNumber,
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
        });
        
        batch.set(
            db.collection('investors').doc(auth.currentUser.phoneNumber),
            {
                requests: firebase.firestore.FieldValue.arrayUnion({
                    txid: tx,
                    status: 'pending',
                    timestamp: new Date()
                })
            },
            { merge: true }
        );
        
        await batch.commit();
        alert(langData[currentLang].txidSuccess);
        document.getElementById('txid-input').value = '';
        checkTxLength();
        loadInvestorData();
        
    } catch (err) {
        alert('Error: ' + err.message);
        console.error(err);
    }
}
</script>

    <div style="text-align: center; color: #444; font-size: 0.7rem; margin-top: 30px; padding-bottom: 20px;">
    System Version: V1.0
    </div>
    
</body>
</html>
